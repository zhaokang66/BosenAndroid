<!DOCTYPE html>

<head>
	<meta charset="UTF-8">
	<!-- 引入样式 -->
	<link rel="stylesheet" href="./css/mint/style.min.css">
	

</head>
<style>
th{
}
table{
	word-break:break-all; 
	word-wrap:break-word;
}
.navButton {
	width: 132px;
	height: 40px;
	border: 0;
	border-radius: 11px;
	background: #26a2ff;
	color: white;
	font-size: 14px;
	outline: none;
	margin: 4px 5px;
}
.navButton:active {
	opacity: 0.5;
}
.inStock{
	width: 300px;
	height: 201px;
	margin: 5px auto;
	text-align: center;
	border: 1px solid grey;
	border-radius: 8px;
}
.outStock{
	width: 300px;
	height: 152px;
	margin: 5px auto;
	text-align: center;
	border: 1px solid grey;
	border-radius: 8px;
}
.list{
	width: 300px;
	margin: 0 auto;
}
</style>

<body>
	<div id="app" >
		<div class="list">
			<div style="width:300px;overflow:scroll" @scroll="topScrollEvent" ref="topDiv" id="topDiv">
				<table width="1200" border="1" style="border-collapse:collapse">
					<thead>
						<tr>
							<th style="width:100px">产品</th>
							<th style="width:100px">付款日期</th>
							<th style="width:100px">状态</th>
							<th style="width:100px">产品</th>
							<th style="width:100px">付款日期</th>
							<th style="width:100px">状态</th>
							<th style="width:100px">产品</th>
							<th style="width:100px">付款日期</th>
							<th style="width:100px">状态</th>
							<th style="width:100px">产品</th>
							<th style="width:100px">付款日期</th>
							<th style="width:100px">状态</th></tr>
						</thead>
					</table>
				</div>

				<div style="width:300px;height:300px;overflow:scroll"  ref="downDiv" @scroll="downScrollEvent" id="downDiv" >

					<table width="1200" border="1" style="border-collapse:collapse" v-infinite-scroll="loadMore"
					infinite-scroll-disabled="loading"
					infinite-scroll-distance="10">
					<tbody>
						<tr v-for="each in list">
							<td style="width:100px">{{each.id}}</td>
							<td style="width:100px">{{each.name}}</td>
							<td style="width:100px">{{each.name2}}</td>
							<td style="width:100px">{{each.name3}}</td>
							<td style="width:100px">{{each.name4}}</td>
							<td style="width:100px">{{each.name5}}</td>
							<td style="width:100px">{{each.name6}}</td>
							<td style="width:100px">{{each.name7}}</td>
							<td style="width:100px">{{each.name8}}</td>
							<td style="width:100px">{{each.name9}}</td>
							<td style="width:100px">{{each.name10}}</td>
							<td style="width:100px">{{each.name11}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

		<div class="inStock">
			<p>入库</p>
			<button class="navButton" @click="jumpUrl('purchaseStorage')">采购入库</button>
			<button class="navButton" @click="jumpUrl('purchaseStorageAndReturn')">采购入库退库</button>
			<button class="navButton" @click="jumpUrl('productStorage')">产成品入库</button>
			<button class="navButton" @click="jumpUrl('productStorageAndReturn')">产成品入库退库</button>
			<button class="navButton" @click="jumpUrl('otherStorage')">其他入库</button>
			<button class="navButton" @click="jumpUrl('otherStorageAndReturn')">其他入库退库</button>
		</div>

		<div class="outStock">
			<p>出库</p>
			<button class="navButton" @click="jumpUrl('materialDelivery')">材料出库</button>
			<button class="navButton" @click="jumpUrl('materialDeliveryAndReturn')">材料出库退库</button>
			<button class="navButton" @click="jumpUrl('otherDelivery')">其他出库</button>
			<button class="navButton" @click="jumpUrl('otherDeliveryAndReturn')">其他出库退库</button>

		</div>
		
		<div id="signature" style="border:1px dotted black"></div>
		<div style="border:1px solid black">
			<button @click="reset">重置</button>
			<button type="button" @click="add">提交</button>

		</div>

		<input name="test" type="text"   v-model.trim="test">
		<input name="image" type="file" accept="image/*" @change="getFile($event)">
		<button type="button" @click="add">提交</button>
		
	</div>
	<button>button</button>


	



	<script src="./js/jquery/jquery3.4.1.js" ></script>
	<!-- 先引入 Vue -->
	<script src="./js/vue/vue2.6.10.js"></script>
	<!-- 引入组件库 -->
	<script src="./js/mint/index.js"></script>
	<script src="./js/jSignature/jSignature.min.js"></script>
	<script src="./js/vue/axios.min.js"></script>	
	<script src="https://cdn.bootcss.com/qs/6.5.1/qs.min.js"></script>
	<script src="./js/setting.js"></script>
	<script>

		$(document).ready(function() {
			$("#signature").jSignature()
		})
		
		function test(){
			alert("调用")
		}


/*
document.getElementById("topDiv").addEventListener("scroll",handleScroll);
document.getElementById("downDiv").addEventListener("scroll",handleScroll2);

function handleScroll(e){
	 //$("#downDiv").scrollLeft($(this).scrollLeft()); // 横向滚动条
	 document.getElementById("downDiv").scrollLeft=this.scrollLeft
}
function handleScroll2(e){
	 //$("#topDiv").scrollLeft($(this).scrollLeft()); // 横向滚动条
	  document.getElementById("topDiv").scrollLeft=this.scrollLeft
	}*/
	$("button").click(function(){
	//makeJava.showToast("okok");

});

/*
var taskswiper = {
      startX: 0,
      startY: 0
   };
   var left=0;
      var top=0;
   $("#downDiv").on('touchstart', function(event){
      if (event.originalEvent.targetTouches.length == 1) {
         taskswiper.startX = event.originalEvent.targetTouches[0].pageX;
         taskswiper.startY = event.originalEvent.targetTouches[0].pageY;
		 
		
		
      }

   });

   $("#downDiv").on('touchmove', function(event){
      taskswiper.leftX = event.originalEvent.targetTouches[0].pageX - taskswiper.startX;
      taskswiper.leftY = event.originalEvent.targetTouches[0].pageY - taskswiper.startY;

      //横向移动大于纵向移动
      if ((Math.abs(taskswiper.leftX) > Math.abs(taskswiper.leftY))) {
	
         //阻止纵向滚动事件
         event.preventDefault();

			$("#downDiv").scrollTop(top);
      }else{

			$("#downDiv").scrollLeft(left);
	   
	  }
	});*/



	window.vue=new Vue({
		el: "#app",
		data: {
			
			list:[],
			test:111,
			file:null
			
		},
		methods: {
			reset:function(){
				$("#signature").jSignature("reset")
			},
			test1 : function() {
				alert(444)
			},
			loadMore:function() {
				
				vue.loading = true;
				
				setTimeout(function(){
					var size=vue.list.length - 1;
					var last = vue.list[size].id;

					if("undefined"==typeof(last))
						last=0;
					for (var i = 1; i <= 10; i++) {
						vue.list.push({"id":last+i,"name":"名字"+(last+i),"name2":"名字2"+(last+i),"name3":"名字3"+(last+i),"name4":"名字4"+(last+i),"name5":"名字5"+(last+i),"name6":"名字6"+(last+i),"name7":"名字7"+(last+i),"name8":"名字8"+(last+i),"name9":"名字9"+(last+i),"name10":"名字10"+(last+i),"name11":"名字11"+(last+i)});
					}
					vue.loading = false;
				}, 1000);
			},
			topScrollEvent:function(e){

				this.$refs.downDiv.scrollLeft=this.$refs.topDiv.scrollLeft;
				
			},
			downScrollEvent:function(e){
				this.$refs.topDiv.scrollLeft=this.$refs.downDiv.scrollLeft;
				this.$refs.topDiv.scrollTop=0;
				
			},
			jumpUrl: function(url) {
				makeJava.jumpHtml("file:///android_asset/"+url+".html");
			},
			getFile: function (event) {
				
				this.file = event.target.files[0];
				console.log(this.file);
			},
			add: function () {
				
				var url = getUrl()+"addSignature/"
				
				var data = $("#signature").jSignature("getData", "svgbase64");
				

					//var testURl=Qs.stringify(test);
					//alert(testURl)
					console.log("data:"+data.join(","))
					console.log(data[1])
					axios.post(url,"base64Str="+encodeURIComponent(data[1])).then(function(response){                       
						alert("成功")
					}).catch(function(e){
						console.log(e)
					})   
				},       
				
				

			},
			mounted:function(){
				for(i=0;i<20;i++){
					this.list.push({"id":i,"name":"名字"+i,"name2":"名字2"+i,"name3":"名字3"+i,"name4":"名字4"+i,"name5":"名字5"+i,"name6":"名字6"+i,"name7":"名字7"+i,"name8":"名字8"+i,"name9":"名字9"+i,"name10":"名字10"+i,"name11":"名字11"+i});
				};
				


			}

		})
	</script>
</body>
